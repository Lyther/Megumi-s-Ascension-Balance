namespace = megumin
country_event = { #灵能升级
	id = megumin.129
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_ascension_perk = ap_mind_over_matter
	}

	immediate = {
		from = {
			random_list = {
				100 = {}
				90 = {
					
					if = {
						limit = {
							has_trait = leader_trait_ruler_psionic_1			
						}
						remove_trait = leader_trait_ruler_psionic_1	
						add_trait = leader_trait_ruler_psionic_2
					}
					else_if = {
						limit = {
							has_trait = leader_trait_admiral_psionic_1
						}
						remove_trait = leader_trait_admiral_psionic_1
						add_trait = leader_trait_admiral_psionic_2
					}
					else_if = {
						limit = {
							has_trait = leader_trait_scientist_psionic_1
						}
						remove_trait = leader_trait_scientist_psionic_1
						add_trait = leader_trait_scientist_psionic_2
					}
					else_if = {
						limit = {
							has_trait = leader_trait_general_psionic_1
						}
						remove_trait = leader_trait_general_psionic_1
						add_trait = leader_trait_general_psionic_2
					}
					else_if = {
						limit = {
							has_trait = leader_trait_governor_psionic_1
						}
						remove_trait = leader_trait_governor_psionic_1
						add_trait = leader_trait_governor_psionic_2
					}
				}
			}
			random_list = {
				75 = {}
				25 = { 					
					if = {
						limit = {
							has_trait = leader_trait_ruler_psionic_2			
						}
						remove_trait = leader_trait_ruler_psionic_2	
						add_trait = leader_trait_ruler_psionic_3
					}
					else_if = {
						limit = {
							has_trait = leader_trait_admiral_psionic_2
						}
						remove_trait = leader_trait_admiral_psionic_2
						add_trait = leader_trait_admiral_psionic_3
					}
					else_if = {
						limit = {
							has_trait = leader_trait_scientist_psionic_2
						}
						remove_trait = leader_trait_scientist_psionic_2
						add_trait = leader_trait_scientist_psionic_3
					}
					else_if = {
						limit = {
							has_trait = leader_trait_general_psionic_2
						}
						remove_trait = leader_trait_general_psionic_2
						add_trait = leader_trait_general_psionic_3
					}
					else_if = {
						limit = {
							has_trait = leader_trait_governor_psionic_2
						}
						remove_trait = leader_trait_governor_psionic_2
						add_trait = leader_trait_governor_psionic_3
					}
				}
			}
			random_list = {
				500 = {}
				25 = {
					 					
					if = {
						limit = {
							has_trait = leader_trait_ruler_psionic_3			
						}
						remove_trait = leader_trait_ruler_psionic_3	
						add_trait = leader_trait_ruler_psionic_4
					}
					else_if = {
						limit = {
							has_trait = leader_trait_admiral_psionic_3
						}
						remove_trait = leader_trait_admiral_psionic_3
						add_trait = leader_trait_admiral_psionic_4
					}
					else_if = {
						limit = {
							has_trait = leader_trait_scientist_psionic_3
						}
						remove_trait = leader_trait_scientist_psionic_3
						add_trait = leader_trait_scientist_psionic_4
					}
					else_if = {
						limit = {
							has_trait = leader_trait_general_psionic_3
						}
						remove_trait = leader_trait_general_psionic_3
						add_trait = leader_trait_general_psionic_4
					}
					else_if = {
						limit = {
							has_trait = leader_trait_governor_psionic_3
						}
						remove_trait = leader_trait_governor_psionic_3
						add_trait = leader_trait_governor_psionic_4
					}
					random_list = {
						10 = {							
						}
						1 = {
							random_list = {
								1 = {
									add_trait = leader_trait_megumin_abjuration
								}
								1 = {
									add_trait = leader_trait_megumin_conjuration								
								}
								1 = {
									add_trait = leader_trait_megumin_divination								
								}
								1 = {
									add_trait = leader_trait_megumin_enchantment								
								}
								1 = {
									add_trait = leader_trait_megumin_evocation								
								}
								1 = {
									add_trait = leader_trait_megumin_illusion								
								}
								1 = {
									add_trait = leader_trait_megumin_necromancy								
								}
								1 = {
									add_trait = leader_trait_megumin_transmutation								
								}
							}
						}
					}
				}
			}
			random_list = {
				1000 = {}
				14 = {
					
					if = {
						limit = {
							has_trait = leader_trait_ruler_psionic_4			
						}
						remove_trait = leader_trait_ruler_psionic_4	
						add_trait = leader_trait_ruler_psionic_5
					}
					else_if = {
						limit = {
							has_trait = leader_trait_admiral_psionic_4
						}
						remove_trait = leader_trait_admiral_psionic_4
						add_trait = leader_trait_admiral_psionic_5
					}
					else_if = {
						limit = {
							has_trait = leader_trait_scientist_psionic_4
						}
						remove_trait = leader_trait_scientist_psionic_4
						add_trait = leader_trait_scientist_psionic_5
					}
					else_if = {
						limit = {
							has_trait = leader_trait_general_psionic_4
						}
						remove_trait = leader_trait_general_psionic_4
						add_trait = leader_trait_general_psionic_5
					}
					else_if = {
						limit = {
							has_trait = leader_trait_governor_psionic_4
						}
						remove_trait = leader_trait_governor_psionic_4
						add_trait = leader_trait_governor_psionic_5
					}
					random_list = {
						1 = {
							while = {
								count = 1
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}

						}
						1 = {
							while = {
								count = 2
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}

						}
						1 = {
							while = {
								count = 3
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}

						}
					}
					
				}
			}
		
		}
	}
}

namespace = megumin_lingfei

country_event = { #大觉醒
	id = megumin_lingfei.1
	title = "megumin_lingfei.1.name"
	desc = "megumin_lingfei.1.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	trigger = {
		has_tradition = tr_psionics_psionic_assimilation
		not = {
			has_country_flag = chaifenlingfei_on
		}
	}
	immediate = {
		set_country_flag = chaifenlingfei_on
		every_owned_pop = {
			limit = {
				is_same_species = root
				has_trait = trait_latent_psionic
			}
			save_event_target_as = psionic_species
		}
	}
	option = {
		name = "放手去做吧。"
		hidden_effect = {
			set_country_flag = yunxulingnengkaifa
			every_owned_leader = {
				limit = {
					species = {
						has_trait = trait_psionic
						is_same_value = event_target:psionic_species
					}
				}


				if = {
					limit = { has_trait = leader_trait_admiral_psionic }
					random_list = {
						50 = {
							add_trait = leader_trait_admiral_psionic_1
						}
						25 = {
							add_trait = leader_trait_admiral_psionic_2
						}
						10 = {
							add_trait = leader_trait_admiral_psionic_3
							random_list = {
								99 = {}
								1 = {
									random_list = {
										1 = {
											add_trait = leader_trait_megumin_abjuration
										}
										1 = {
											add_trait = leader_trait_megumin_conjuration								
										}
										1 = {
											add_trait = leader_trait_megumin_divination								
										}
										1 = {
											add_trait = leader_trait_megumin_enchantment								
										}
										1 = {
											add_trait = leader_trait_megumin_evocation								
										}
										1 = {
											add_trait = leader_trait_megumin_illusion								
										}
										1 = {
											add_trait = leader_trait_megumin_necromancy								
										}
										1 = {
											add_trait = leader_trait_megumin_transmutation								
										}
									}
								}
							}
						}
					}
					add_ruler_trait = leader_trait_ruler_psionic_3
				}
				else_if = {
					limit = { has_trait = leader_trait_general_psionic }
					random_list = {
						50 = {
							add_trait = leader_trait_general_psionic_1
						}
						25 = {
							add_trait = leader_trait_general_psionic_2
						}
						10 = {
							add_trait = leader_trait_general_psionic_3
							random_list = {
								99 = {}
								1 = {
									random_list = {
										1 = {
											add_trait = leader_trait_megumin_abjuration
										}
										1 = {
											add_trait = leader_trait_megumin_conjuration								
										}
										1 = {
											add_trait = leader_trait_megumin_divination								
										}
										1 = {
											add_trait = leader_trait_megumin_enchantment								
										}
										1 = {
											add_trait = leader_trait_megumin_evocation								
										}
										1 = {
											add_trait = leader_trait_megumin_illusion								
										}
										1 = {
											add_trait = leader_trait_megumin_necromancy								
										}
										1 = {
											add_trait = leader_trait_megumin_transmutation								
										}
									}
								}
							}
						}
					}
					add_ruler_trait = leader_trait_ruler_psionic_3
				}
				else_if = {
					limit = { has_trait = leader_trait_governor_psionic }
					random_list = {
						50 = {
							add_trait = leader_trait_governor_psionic_1
						}
						25 = {
							add_trait = leader_trait_governor_psionic_2
						}
						10 = {
							add_trait = leader_trait_governor_psionic_3
							random_list = {
								99 = {}
								1 = {
									random_list = {
										1 = {
											add_trait = leader_trait_megumin_abjuration
										}
										1 = {
											add_trait = leader_trait_megumin_conjuration								
										}
										1 = {
											add_trait = leader_trait_megumin_divination								
										}
										1 = {
											add_trait = leader_trait_megumin_enchantment								
										}
										1 = {
											add_trait = leader_trait_megumin_evocation								
										}
										1 = {
											add_trait = leader_trait_megumin_illusion								
										}
										1 = {
											add_trait = leader_trait_megumin_necromancy								
										}
										1 = {
											add_trait = leader_trait_megumin_transmutation								
										}
									}
								}
							}
						}
					}
				}
				else_if = {
					limit = { has_trait = leader_trait_scientist_psionic }
					random_list = {
						50 = {
							add_trait = leader_trait_scientist_psionic_1
						}
						25 = {
							add_trait = leader_trait_scientist_psionic_2
						}
						10 = {
							add_trait = leader_trait_scientist_psionic_3
							random_list = {
								99 = {}
								1 = {
									random_list = {
										1 = {
											add_trait = leader_trait_megumin_abjuration
										}
										1 = {
											add_trait = leader_trait_megumin_conjuration								
										}
										1 = {
											add_trait = leader_trait_megumin_divination								
										}
										1 = {
											add_trait = leader_trait_megumin_enchantment								
										}
										1 = {
											add_trait = leader_trait_megumin_evocation								
										}
										1 = {
											add_trait = leader_trait_megumin_illusion								
										}
										1 = {
											add_trait = leader_trait_megumin_necromancy								
										}
										1 = {
											add_trait = leader_trait_megumin_transmutation								
										}
									}
								}
							}
						}
					}
					add_ruler_trait = leader_trait_ruler_psionic_3
				}
				else_if = {
					limit = { has_trait = leader_trait_ruler_psionic }
					add_trait = leader_trait_ruler_psionic_3
					add_ruler_trait = leader_trait_ruler_psionic_3
				}
			}
			every_pool_leader = {
				limit = {
					is_same_species = root
					species = {
						has_trait = trait_psionic
						is_same_value = event_target:psionic_species
					}
					NOR = {
						has_trait = leader_trait_admiral_psionic_1
						has_trait = leader_trait_admiral_psionic_2
						has_trait = leader_trait_admiral_psionic_3
						has_trait = leader_trait_admiral_psionic_4
						has_trait = leader_trait_admiral_psionic_5
						has_trait = leader_trait_general_psionic_1
						has_trait = leader_trait_general_psionic_2
						has_trait = leader_trait_general_psionic_3
						has_trait = leader_trait_general_psionic_4
						has_trait = leader_trait_general_psionic_5
						has_trait = leader_trait_governor_psionic_1
						has_trait = leader_trait_governor_psionic_2
						has_trait = leader_trait_governor_psionic_3
						has_trait = leader_trait_governor_psionic_4
						has_trait = leader_trait_governor_psionic_5
						has_trait = leader_trait_scientist_psionic_1
						has_trait = leader_trait_scientist_psionic_2
						has_trait = leader_trait_scientist_psionic_3
						has_trait = leader_trait_scientist_psionic_4
						has_trait = leader_trait_scientist_psionic_5
						has_trait = leader_trait_ruler_psionic_1
						has_trait = leader_trait_ruler_psionic_2
						has_trait = leader_trait_ruler_psionic_3
						has_trait = leader_trait_ruler_psionic_4
						has_trait = leader_trait_ruler_psionic_5
					}
				}
				if = {
					limit = { leader_class = admiral }
					add_trait = leader_trait_admiral_psionic_1
					add_ruler_trait = leader_trait_ruler_psionic_1
				}
				else_if = {
					limit = { leader_class = general }
					add_trait = leader_trait_general_psionic_1
					add_ruler_trait = leader_trait_ruler_psionic_1
				}
				else_if = {
					limit = { leader_class = governor }
					add_trait = leader_trait_governor_psionic_1
					add_ruler_trait = leader_trait_ruler_psionic_1
				}
				else_if = {
					limit = { leader_class = scientist }
					add_trait = leader_trait_scientist_psionic_1
					add_ruler_trait = leader_trait_ruler_psionic_1
				}
				else_if = {
					limit = { leader_class = ruler }
					add_trait = leader_trait_ruler_psionic_1
					add_ruler_trait = leader_trait_ruler_psionic_1
				}
			}			
		}
	}
	option = {
		name = "我们不能容忍这样的事情"
	}
}

country_event = { #领袖池事件
	id = megumin_lingfei.2
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_country_flag = chaifenlingfei_on
		from = {
			species = { has_trait = trait_psionic }
			NOT = {
				has_trait = leader_trait_admiral_psionic_1
				has_trait = leader_trait_admiral_psionic_2
				has_trait = leader_trait_admiral_psionic_3
				has_trait = leader_trait_admiral_psionic_4
				has_trait = leader_trait_admiral_psionic_5
				has_trait = leader_trait_general_psionic_1
				has_trait = leader_trait_general_psionic_2
				has_trait = leader_trait_general_psionic_3
				has_trait = leader_trait_general_psionic_4
				has_trait = leader_trait_general_psionic_5
				has_trait = leader_trait_governor_psionic_1
				has_trait = leader_trait_governor_psionic_2
				has_trait = leader_trait_governor_psionic_3
				has_trait = leader_trait_governor_psionic_4
				has_trait = leader_trait_governor_psionic_5
				has_trait = leader_trait_scientist_psionic_1
				has_trait = leader_trait_scientist_psionic_2
				has_trait = leader_trait_scientist_psionic_3
				has_trait = leader_trait_scientist_psionic_4
				has_trait = leader_trait_scientist_psionic_5
				has_trait = leader_trait_ruler_psionic_1
				has_trait = leader_trait_ruler_psionic_2
				has_trait = leader_trait_ruler_psionic_3
				has_trait = leader_trait_ruler_psionic_4
				has_trait = leader_trait_ruler_psionic_5
			}
		}
	}

	immediate = {
		from = {
			if = {
				limit = { leader_class = admiral }
				random_list = {
					140 = {
						add_trait = leader_trait_admiral_psionic_1
						

						add_ruler_trait = leader_trait_ruler_psionic_1
					}
					100 = {
						add_trait = leader_trait_admiral_psionic_2
						add_ruler_trait = leader_trait_ruler_psionic_2					
					}
					18 = {
						add_trait = leader_trait_admiral_psionic_3
						add_ruler_trait = leader_trait_ruler_psionic_3
						random_list = {
							99 = {
								
							}
							1 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}						
					}
					4 = {
						add_trait = leader_trait_admiral_psionic_4
						add_ruler_trait = leader_trait_ruler_psionic_4	
						random_list = {
							75 = {}
							25 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}						
					}
					2 = {
						add_trait = leader_trait_admiral_psionic_5
						add_ruler_trait = leader_trait_ruler_psionic_5
						random_list = {
							1 = {
								add_trait = leader_trait_megumin_abjuration
							}
							1 = {
								add_trait = leader_trait_megumin_conjuration								
							}
							1 = {
								add_trait = leader_trait_megumin_divination								
							}
							1 = {
								add_trait = leader_trait_megumin_enchantment								
							}
							1 = {
								add_trait = leader_trait_megumin_evocation								
							}
							1 = {
								add_trait = leader_trait_megumin_illusion								
							}
							1 = {
								add_trait = leader_trait_megumin_necromancy								
							}
							1 = {
								add_trait = leader_trait_megumin_transmutation								
							}
						}
						random_list = {
							75 = { 

							}
							25 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}
						random_list = {
							95 = { 

							}
							5 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}	
						
					}
				}
				break = yes
			}
			else_if = {
				limit = { leader_class = general }
				random_list = {
					140 = {
						add_trait = leader_trait_general_psionic_1
						add_ruler_trait = leader_trait_ruler_psionic_1
					}
					100 = {
						add_trait = leader_trait_general_psionic_2
						add_ruler_trait = leader_trait_ruler_psionic_2						
					}
					18 = {
						add_trait = leader_trait_general_psionic_3
						add_ruler_trait = leader_trait_ruler_psionic_3
						random_list = {
							99 = {}
							1 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}						
					}
					4 = {
						add_trait = leader_trait_general_psionic_4
						add_ruler_trait = leader_trait_ruler_psionic_4		
						random_list = {
							75 = {}
							25 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}				
					}
					2 = {
						add_trait = leader_trait_general_psionic_5
						add_ruler_trait = leader_trait_ruler_psionic_5
						random_list = {
							1 = {
								add_trait = leader_trait_megumin_abjuration
							}
							1 = {
								add_trait = leader_trait_megumin_conjuration								
							}
							1 = {
								add_trait = leader_trait_megumin_divination								
							}
							1 = {
								add_trait = leader_trait_megumin_enchantment								
							}
							1 = {
								add_trait = leader_trait_megumin_evocation								
							}
							1 = {
								add_trait = leader_trait_megumin_illusion								
							}
							1 = {
								add_trait = leader_trait_megumin_necromancy								
							}
							1 = {
								add_trait = leader_trait_megumin_transmutation								
							}
						}
						random_list = {
							75 = { 

							}
							25 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}
						random_list = {
							95 = { 

							}
							5 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}		
					}
				}
				break = yes
			}
			else_if = {
				limit = { leader_class = governor }
				random_list = {
					140 = {
						add_trait = leader_trait_governor_psionic_1
						add_ruler_trait = leader_trait_ruler_psionic_1
					}
					100 = {
						add_trait = leader_trait_governor_psionic_2
						add_ruler_trait = leader_trait_ruler_psionic_2						
					}
					18 = {
						add_trait = leader_trait_governor_psionic_3
						add_ruler_trait = leader_trait_ruler_psionic_3	
						random_list = {
							99 = {}
							1 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}					
					}
					4 = {
						add_trait = leader_trait_governor_psionic_4
						add_ruler_trait = leader_trait_ruler_psionic_4		
						random_list = {
							75 = {}
							25 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}				
					}
					2 = {
						add_trait = leader_trait_governor_psionic_5
						add_ruler_trait = leader_trait_ruler_psionic_5	
						random_list = {
							1 = {
								add_trait = leader_trait_megumin_abjuration
							}
							1 = {
								add_trait = leader_trait_megumin_conjuration								
							}
							1 = {
								add_trait = leader_trait_megumin_divination								
							}
							1 = {
								add_trait = leader_trait_megumin_enchantment								
							}
							1 = {
								add_trait = leader_trait_megumin_evocation								
							}
							1 = {
								add_trait = leader_trait_megumin_illusion								
							}
							1 = {
								add_trait = leader_trait_megumin_necromancy								
							}
							1 = {
								add_trait = leader_trait_megumin_transmutation								
							}
						}
						random_list = {
							75 = { 

							}
							25 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}
						random_list = {
							95 = { 

							}
							5 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}		
					}
				}
				break = yes
			}
			else_if = {
				limit = { leader_class = scientist }
				random_list = {
					140 = {
						add_trait = leader_trait_scientist_psionic_1
						add_ruler_trait = leader_trait_ruler_psionic_1
					}
					100 = {
						add_trait = leader_trait_scientist_psionic_2
						add_ruler_trait = leader_trait_ruler_psionic_2						
					}
					18 = {
						add_trait = leader_trait_scientist_psionic_3
						add_ruler_trait = leader_trait_ruler_psionic_3
						random_list = {
							99 = {}
							1 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}							
					}
					4 = {
						add_trait = leader_trait_scientist_psionic_4
						add_ruler_trait = leader_trait_ruler_psionic_4
						random_list = {
							75 = {}
							25 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}						
					}
					2 = {
						add_trait = leader_trait_scientist_psionic_5
						add_ruler_trait = leader_trait_ruler_psionic_5
						random_list = {
							1 = {
								add_trait = leader_trait_megumin_abjuration
							}
							1 = {
								add_trait = leader_trait_megumin_conjuration								
							}
							1 = {
								add_trait = leader_trait_megumin_divination								
							}
							1 = {
								add_trait = leader_trait_megumin_enchantment								
							}
							1 = {
								add_trait = leader_trait_megumin_evocation								
							}
							1 = {
								add_trait = leader_trait_megumin_illusion								
							}
							1 = {
								add_trait = leader_trait_megumin_necromancy								
							}
							1 = {
								add_trait = leader_trait_megumin_transmutation								
							}
						}
						random_list = {
							75 = { 

							}
							25 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}
						random_list = {
							95 = { 

							}
							5 = {
								random_list = {
									1 = {
										add_trait = leader_trait_megumin_abjuration
									}
									1 = {
										add_trait = leader_trait_megumin_conjuration								
									}
									1 = {
										add_trait = leader_trait_megumin_divination								
									}
									1 = {
										add_trait = leader_trait_megumin_enchantment								
									}
									1 = {
										add_trait = leader_trait_megumin_evocation								
									}
									1 = {
										add_trait = leader_trait_megumin_illusion								
									}
									1 = {
										add_trait = leader_trait_megumin_necromancy								
									}
									1 = {
										add_trait = leader_trait_megumin_transmutation								
									}
								}
							}
						}			
					}
				}
				break = yes
			}
			else_if = {
				limit = { leader_class = ruler }
				random_list = {
					140 = {
						add_ruler_trait = leader_trait_ruler_psionic_1
					}
					100 = {
						add_ruler_trait = leader_trait_ruler_psionic_2						
					}
					18 = {
						add_ruler_trait = leader_trait_ruler_psionic_3						
					}
					4 = {
						add_ruler_trait = leader_trait_ruler_psionic_4						
					}
					2 = {
						add_ruler_trait = leader_trait_ruler_psionic_5	
					}
				}
				break = yes
			}
		}
	}
}


namespace = utopia

country_event = {
	id = utopia.2650
	title = "utopia.2650.name"
	desc = "utopia.2650.desc"
	picture = GFX_evt_psionics
	show_sound = event_the_great_awakening

	is_triggered_only = yes

	trigger = {
		has_tradition = tr_psionics_psionic_assimilation
	}

	immediate = {
		every_owned_pop = {
			limit = {
				is_same_species = root
				has_trait = trait_latent_psionic
			}
			modify_species = {
				species = this
				remove_trait = trait_latent_psionic
				add_trait = trait_psionic
				effect = {
					save_event_target_as = psionic_species
				}
			}
		}
		change_dominant_species = { species = event_target:psionic_species change_all = yes }
	}
	option = {
		name = "utopia.2650.a"
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						is_country_type = default
						is_country_type = fallen_empire
						is_country_type = awakened_fallen_empire
					}
				}
				every_owned_leader = {
					limit = {
						species = {
							has_trait = trait_psionic
							is_same_value = event_target:psionic_species
						}
						NOR = {
							has_trait =	leader_trait_admiral_psionic
							has_trait =	leader_trait_general_psionic
							has_trait =	leader_trait_governor_psionic
							has_trait =	leader_trait_scientist_psionic
							has_trait =	leader_trait_ruler_psionic
						}
					}
					if = {
						limit = { leader_class = admiral }
						add_trait = leader_trait_admiral_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = general }
						add_trait = leader_trait_general_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = governor }
						add_trait = leader_trait_governor_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = scientist }
						add_trait = leader_trait_scientist_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = ruler }
						add_trait = leader_trait_ruler_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
				}
				every_pool_leader = {
					limit = {
						species = {
							has_trait = trait_psionic
							is_same_value = event_target:psionic_species
						}
						NOR = {
							has_trait = leader_trait_admiral_psionic
							has_trait = leader_trait_general_psionic
							has_trait = leader_trait_governor_psionic
							has_trait = leader_trait_scientist_psionic
							has_trait = leader_trait_ruler_psionic
						}
					}
					if = {
						limit = { leader_class = admiral }
						add_trait = leader_trait_admiral_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = general }
						add_trait = leader_trait_general_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = governor }
						add_trait = leader_trait_governor_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = scientist }
						add_trait = leader_trait_scientist_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
					if = {
						limit = { leader_class = ruler }
						add_trait = leader_trait_ruler_psionic
						add_ruler_trait = leader_trait_ruler_psionic
					}
				}
			}
			observer_event = { id = observer.6 }
			every_country = {
				limit = {
					is_ai = no
					has_communications = root
					NOT = { is_same_value = root }
				}
				country_event = { id = utopia.2652 }
			}
		}
		country_event = {
			id = megumin_lingfei.1
			days = 60
		}
	}
}